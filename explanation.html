<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>AIè§£èª¬ä»˜ããƒšãƒ¼ã‚¸</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; }
        .ai-section { background: #f9f9f9; border-left: 5px solid #3498db; padding: 20px; margin-top: 30px; }
        textarea { width: 100%; height: 100px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; padding: 10px; }
        #ai-response { white-space: pre-wrap; background: #eee; padding: 15px; border-radius: 5px; display: none; margin-top: 15px; }
        #loading { color: #3498db; font-weight: bold; margin-top: 10px; }
        button { background: #3498db; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 4px; }
        button:hover { background-color: #2980b9; }
    </style>
</head>
<body>

    <h1>è§£èª¬ãƒšãƒ¼ã‚¸</h1>
    <p>åˆ†æ•£ã¨ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒ©ã¤ãã‚’å¹³æ–¹å’Œã®å¹³å‡ã§è¡¨ã—ãŸã‚‚ã®ã§ã™...</p>

    <div class="ai-section">
        <h3>ğŸ¤– Gemini AIã«è³ªå•ã™ã‚‹</h3>
        <p>ã“ã®è§£èª¬ã§åˆ†ã‹ã‚‰ãªã„éƒ¨åˆ†ã‚’å…·ä½“çš„ã«èã„ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
        <textarea id="userQuestion" placeholder="ä¾‹ï¼šãªãœåˆ†æ•£ã¯2ä¹—ã™ã‚‹ã®ã§ã™ã‹ï¼Ÿ"></textarea>
        <br>
        <button onclick="askAI()">AIã«èã</button>
        
        <div id="loading" style="display:none;">AIãŒæ€è€ƒä¸­...</div>
        <div id="ai-response"></div>
    </div>

    <script>
        async function askAI() {
            // ã‚ãªãŸã®APIã‚­ãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            const API_KEY = "AIzaSyBxetJARXwhao3-4V5Co2DbH359R1zrqwA"; 
            // ã€Œgemini-2.0-flashã€ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã‚ŒãŒã‚ãªãŸã®ãƒªã‚¹ãƒˆã§ä¸€ç•ªä¸Šã«ã‚ã£ãŸæœ‰åŠ¹ãªãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚
            // ã€Œgemini-flash-latestã€ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã‚ŒãŒç¾åœ¨ã®v1betaã§æœ€ã‚‚æ¨å¥¨ã•ã‚Œã‚‹æ›¸ãæ–¹ã§ã™ã€‚
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-flash-latest:generateContent?key=${API_KEY}`;
            const question = document.getElementById("userQuestion").value;
            const responseDiv = document.getElementById("ai-response");
            const loadingDiv = document.getElementById("loading");

            if (!question) {
                alert("è³ªå•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
                return;
            }

            loadingDiv.style.display = "block";
            responseDiv.style.display = "none";

            const data = {
                contents: [{
                    parts: [{ text: `ã‚ãªãŸã¯çµ±è¨ˆå­¦ã®å°‚é–€å®¶ã§ã™ã€‚ä»¥ä¸‹ã®è³ªå•ã«ã‚ã‹ã‚Šã‚„ã™ãç­”ãˆã¦ãã ã•ã„ï¼š${question}` }]
                }]
            };

            try {
                const response = await fetch(url, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                
                if (result.candidates && result.candidates[0] && result.candidates[0].content) {
                    const aiText = result.candidates[0].content.parts[0].text;
                    responseDiv.innerText = aiText;
                    responseDiv.style.display = "block";
                } else if (result.error) {
                    // 429ã‚¨ãƒ©ãƒ¼ãªã©ã®å…·ä½“çš„ãªç†ç”±ã‚’è¡¨ç¤ºã™ã‚‹
                    alert("AIã‹ã‚‰ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: " + result.error.message);
                    console.error("API Error:", result.error);
                } else {
                    alert("äºˆæœŸã›ã¬å¿œç­”å½¢å¼ã§ã™ã€‚ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
                    console.log("Full Result:", result);
                }

            } catch (error) {
                console.error("Error:", error);
                alert("AIã¨ã®é€šä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚APIã‚­ãƒ¼ãŒæ­£ã—ã„ã‹ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
            } finally {
                loadingDiv.style.display = "none";
            }
        }
    </script>
</body>
</html>